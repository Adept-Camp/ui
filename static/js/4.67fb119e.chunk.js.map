{"version":3,"sources":["components/ThreeBoxUpdate.bs.js"],"names":["ThreeBoxUpdate$ProfileItem","Props","fieldName","fieldTitle","fieldDescription","fieldValue","onEdit","match","React","$$String","length","setIsEdit","children","undefined","RimbleUi","type","placeholder","onChange","$$event","value","Belt_Option","target","Curry","param","onClick","e","preventDefault","message","placement","ProfileItem","make","ThreeBoxUpdate$ProfileDetails","tmp","profileName","profileDescription","reloadUser","setThreeBoxState","threeBoxState","setEditedName","editedName","match$1","setEditedDescription","editedDescription","areChanges","optEthereumWallet","RootProvider$WildCards","optWeb3Provider","tag","$$Promise","toResult","Box","provider","threeBoxInstance","Block","syncDone","isBoxLoaded","state","namePromise","public","set","descriptionPromise","a","p","ProfileDetails","getResult","result","parsedResult","JSON","parse","status","data","verification","ThreeBoxUpdate$TwitterVerification","twitterVerification","currentUser","setTwitterVerificationStep","twitterVerificationStep","setTwitterHandle","twitterHandle","DID","remove","did","link","String","fetch","Fetch","Caml_option","stringify","then","prim","text","optTwitterProof","exit","verified","addTwitter","_result","Promise","resolve","submitTwitterVerification","className","href","rel","TwitterVerification","ThreeBoxUpdate$ThreeBoxUpdate","userInfoContext","UserProvider$WildCards","forceReload","update","optThreeBoxData","profile","verifications","name","description","twitter","ThreeBoxUpdate","ThreeBoxUpdate$Main","setIsIntegarted3Box","_e","Main","$$default"],"mappings":"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","file":"static/js/4.67fb119e.chunk.js","sourcesContent":["// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE\n\nimport * as Box from \"3box\";\nimport * as Block from \"bs-platform/lib/es6/block.js\";\nimport * as Curry from \"bs-platform/lib/es6/curry.js\";\nimport * as Fetch from \"bs-fetch/src/Fetch.js\";\nimport * as React from \"react\";\nimport * as $$String from \"bs-platform/lib/es6/string.js\";\nimport * as $$Promise from \"reason-promise/src/js/promise.js\";\nimport * as RimbleUi from \"rimble-ui\";\nimport * as Belt_Option from \"bs-platform/lib/es6/belt_Option.js\";\nimport * as Caml_option from \"bs-platform/lib/es6/caml_option.js\";\nimport * as RootProvider$WildCards from \"../helpers/providers/RootProvider.bs.js\";\nimport * as UserProvider$WildCards from \"../helpers/providers/UserProvider.bs.js\";\n\nfunction ThreeBoxUpdate$ProfileItem(Props) {\n  var fieldName = Props.fieldName;\n  var fieldTitle = Props.fieldTitle;\n  var fieldDescription = Props.fieldDescription;\n  var fieldValue = Props.fieldValue;\n  var onEdit = Props.onEdit;\n  var match = React.useState((function () {\n          return $$String.trim(fieldValue).length === 0;\n        }));\n  var setIsEdit = match[1];\n  return React.createElement(React.Fragment, {\n              children: match[0] ? React.createElement(\"div\", undefined, React.createElement(RimbleUi.Input, {\n                          type: \"string\",\n                          placeholder: fieldName,\n                          onChange: (function ($$event) {\n                              var value = Belt_Option.getWithDefault($$event.target.value, \"\");\n                              return Curry._1(onEdit, (function (param) {\n                                            return value;\n                                          }));\n                            }),\n                          value: fieldValue\n                        })) : React.createElement(\"div\", {\n                      onClick: (function (e) {\n                          e.preventDefault();\n                          return Curry._1(setIsEdit, (function (param) {\n                                        return true;\n                                      }));\n                        })\n                    }, React.createElement(\"small\", undefined, React.createElement(\"strong\", undefined, fieldTitle, React.createElement(RimbleUi.Tooltip, {\n                                  message: fieldDescription,\n                                  placement: \"top\",\n                                  children: React.createElement(\"span\", undefined, \"ⓘ\")\n                                }))), React.createElement(\"br\", undefined), fieldValue, React.createElement(\"br\", undefined))\n            });\n}\n\nvar ProfileItem = {\n  make: ThreeBoxUpdate$ProfileItem\n};\n\nfunction ThreeBoxUpdate$ProfileDetails(Props) {\n  var profileName = Props.profileName;\n  var profileDescription = Props.profileDescription;\n  var reloadUser = Props.reloadUser;\n  var setThreeBoxState = Props.setThreeBoxState;\n  var threeBoxState = Props.threeBoxState;\n  var match = React.useState((function () {\n          return profileName;\n        }));\n  var setEditedName = match[1];\n  var editedName = match[0];\n  var match$1 = React.useState((function () {\n          return profileDescription;\n        }));\n  var setEditedDescription = match$1[1];\n  var editedDescription = match$1[0];\n  var nameChange = editedName !== profileName;\n  var descriptionChange = editedDescription !== profileDescription;\n  var areChanges = nameChange || descriptionChange;\n  var optEthereumWallet = RootProvider$WildCards.useCurrentUser(undefined);\n  var optWeb3Provider = RootProvider$WildCards.useWeb3(undefined);\n  var tmp;\n  if (typeof threeBoxState === \"number\") {\n    tmp = threeBoxState === /* Loading3Box */0 ? React.createElement(RimbleUi.Heading, {\n            children: \"Loading 3Box...\"\n          }) : React.createElement(React.Fragment, {\n            children: React.createElement(RimbleUi.Heading, {\n                  children: \"There was an error loading your box\"\n                })\n          });\n  } else {\n    switch (threeBoxState.tag | 0) {\n      case /* DefaultView */0 :\n          tmp = React.createElement(React.Fragment, {\n                children: null\n              }, React.createElement(\"p\", undefined, \"click on any item to edit it\"), React.createElement(ThreeBoxUpdate$ProfileItem, {\n                    fieldName: \"name\",\n                    fieldTitle: \"Name\",\n                    fieldDescription: \"Your 3box name\",\n                    fieldValue: editedName,\n                    onEdit: setEditedName\n                  }), React.createElement(ThreeBoxUpdate$ProfileItem, {\n                    fieldName: \"description\",\n                    fieldTitle: \"Description\",\n                    fieldDescription: \"Your 3box description\",\n                    fieldValue: editedDescription,\n                    onEdit: setEditedDescription\n                  }), areChanges ? React.createElement(React.Fragment, {\n                      children: null\n                    }, React.createElement(RimbleUi.Button, {\n                          children: \"Save\",\n                          onClick: (function (e) {\n                              e.preventDefault();\n                              Curry._1(setThreeBoxState, (function (param) {\n                                      return /* Loading3Box */0;\n                                    }));\n                              if (optEthereumWallet !== undefined && optWeb3Provider !== undefined) {\n                                $$Promise.getOk($$Promise.Js.toResult(Box.openBox(optEthereumWallet, optWeb3Provider.provider)), (function (threeBoxInstance) {\n                                        Curry._1(setThreeBoxState, (function (param) {\n                                                return /* LoggedIn */Block.__(1, [\n                                                          threeBoxInstance,\n                                                          true\n                                                        ]);\n                                              }));\n                                        return $$Promise.get($$Promise.Js.toResult(threeBoxInstance.syncDone), (function (isBoxLoaded) {\n                                                      var state;\n                                                      if (isBoxLoaded.tag) {\n                                                        state = /* Load3BoxError */1;\n                                                      } else {\n                                                        var namePromise = profileName === editedName ? $$Promise.resolved(/* Ok */Block.__(0, [undefined])) : $$Promise.Js.toResult(threeBoxInstance.public.set(\"name\", editedName));\n                                                        var descriptionPromise = profileDescription === editedDescription ? $$Promise.resolved(/* Ok */Block.__(0, [undefined])) : $$Promise.Js.toResult(threeBoxInstance.public.set(\"description\", editedDescription));\n                                                        $$Promise.get($$Promise.all2(namePromise, descriptionPromise), (function (a) {\n                                                                if (!a[0].tag && !a[1].tag) {\n                                                                  Curry._1(reloadUser, true);\n                                                                  return Curry._1(setThreeBoxState, (function (param) {\n                                                                                return /* DefaultView */Block.__(0, [/* Saved */1]);\n                                                                              }));\n                                                                }\n                                                                return Curry._1(setThreeBoxState, (function (param) {\n                                                                              return /* DefaultView */Block.__(0, [/* FailedToSave */2]);\n                                                                            }));\n                                                              }));\n                                                        state = /* SyncedBox */Block.__(2, [threeBoxInstance]);\n                                                      }\n                                                      return Curry._1(setThreeBoxState, (function (param) {\n                                                                    return state;\n                                                                  }));\n                                                    }));\n                                      }));\n                                return ;\n                              }\n                              \n                            })\n                        }), React.createElement(RimbleUi.Button, {\n                          children: \"Cancel\",\n                          onClick: (function (e) {\n                              e.preventDefault();\n                              Curry._1(setEditedName, (function (param) {\n                                      return profileName;\n                                    }));\n                              return Curry._1(setEditedDescription, (function (param) {\n                                            return profileDescription;\n                                          }));\n                            })\n                        })) : null);\n          break;\n      case /* LoggedIn */1 :\n          tmp = React.createElement(RimbleUi.Heading, {\n                children: \"3 box is loaded - syncing profile\"\n              });\n          break;\n      case /* SyncedBox */2 :\n          tmp = React.createElement(RimbleUi.Heading, {\n                children: \"3 box is synced, SAVING profile data\"\n              });\n          break;\n      case /* SyncedBoxWithSpace */3 :\n          tmp = React.createElement(React.Fragment, {\n                children: React.createElement(RimbleUi.Heading, {\n                      children: \"3 box is synced, loading 'wildcards' space\"\n                    })\n              });\n          break;\n      case /* SyncedSpace */4 :\n          tmp = React.createElement(React.Fragment, {\n                children: React.createElement(RimbleUi.Heading, {\n                      children: \"3 box and 'wildcards' space is synced\"\n                    })\n              });\n          break;\n      \n    }\n  }\n  return React.createElement(RimbleUi.Box, {\n              p: 1,\n              children: tmp\n            });\n}\n\nvar ProfileDetails = {\n  make: ThreeBoxUpdate$ProfileDetails\n};\n\nvar getResult = (function(result) {\n    const parsedResult = JSON.parse(result);\n    if (parsedResult.status === \"success\") {\n      return parsedResult.data.verification\n    } else {\n      return undefined\n    }\n  });\n\nfunction ThreeBoxUpdate$TwitterVerification(Props) {\n  var twitterVerification = Props.twitterVerification;\n  var threeBoxState = Props.threeBoxState;\n  var setThreeBoxState = Props.setThreeBoxState;\n  var reloadUser = Props.reloadUser;\n  var currentUser = Belt_Option.mapWithDefault(RootProvider$WildCards.useCurrentUser(undefined), \"\", (function (a) {\n          return a;\n        }));\n  var optEthereumWallet = RootProvider$WildCards.useCurrentUser(undefined);\n  var optWeb3Provider = RootProvider$WildCards.useWeb3(undefined);\n  var match = React.useState((function () {\n          return /* Uninitialized */0;\n        }));\n  var setTwitterVerificationStep = match[1];\n  var twitterVerificationStep = match[0];\n  var verifyTwitter = function (param) {\n    Curry._1(setThreeBoxState, (function (param) {\n            return /* Loading3Box */0;\n          }));\n    if (optEthereumWallet !== undefined && optWeb3Provider !== undefined) {\n      Curry._1(setTwitterVerificationStep, (function (param) {\n              return /* PreparePostToTwitter */1;\n            }));\n      $$Promise.getOk($$Promise.Js.toResult(Box.openBox(optEthereumWallet, optWeb3Provider.provider)), (function (threeBoxInstance) {\n              Curry._1(setThreeBoxState, (function (param) {\n                      return /* LoggedIn */Block.__(1, [\n                                threeBoxInstance,\n                                true\n                              ]);\n                    }));\n              Curry._1(setTwitterVerificationStep, (function (param) {\n                      return /* PostToTwitter */Block.__(0, [threeBoxInstance.DID]);\n                    }));\n              return $$Promise.get($$Promise.Js.toResult(threeBoxInstance.syncDone), (function (isBoxLoaded) {\n                            var state;\n                            state = isBoxLoaded.tag ? /* Load3BoxError */1 : /* SyncedBox */Block.__(2, [threeBoxInstance]);\n                            return Curry._1(setThreeBoxState, (function (param) {\n                                          return state;\n                                        }));\n                          }));\n            }));\n    }\n    \n  };\n  var removeTwitter = function (param) {\n    Curry._1(setThreeBoxState, (function (param) {\n            return /* Loading3Box */0;\n          }));\n    if (optEthereumWallet !== undefined && optWeb3Provider !== undefined) {\n      Curry._1(setTwitterVerificationStep, (function (param) {\n              return /* PreparePostToTwitter */1;\n            }));\n      $$Promise.getOk($$Promise.Js.toResult(Box.openBox(optEthereumWallet, optWeb3Provider.provider)), (function (threeBoxInstance) {\n              Curry._1(setThreeBoxState, (function (param) {\n                      return /* LoggedIn */Block.__(1, [\n                                threeBoxInstance,\n                                true\n                              ]);\n                    }));\n              Curry._1(setTwitterVerificationStep, (function (param) {\n                      return /* PostToTwitter */Block.__(0, [threeBoxInstance.DID]);\n                    }));\n              return $$Promise.get($$Promise.Js.toResult(threeBoxInstance.syncDone), (function (isBoxLoaded) {\n                            var state;\n                            if (isBoxLoaded.tag) {\n                              state = /* Load3BoxError */1;\n                            } else {\n                              threeBoxInstance.public.remove(\"proof_twitter\");\n                              Curry._1(reloadUser, true);\n                              state = /* SyncedBox */Block.__(2, [threeBoxInstance]);\n                            }\n                            return Curry._1(setThreeBoxState, (function (param) {\n                                          return state;\n                                        }));\n                          }));\n            }));\n    }\n    \n  };\n  var submitTwitterVerification = function (did, twitterHandle) {\n    Curry._1(setTwitterVerificationStep, (function (param) {\n            return /* VerifyWithServer */Block.__(1, [did]);\n          }));\n    fetch(\"https://wildcards.xyz/verification3boxTwitter\", Fetch.RequestInit.make(/* Post */2, {\n                    \"Content-Type\": \"application/json\"\n                  }, Caml_option.some(Belt_Option.mapWithDefault(JSON.stringify({\n                                did: did,\n                                twitterHandle: twitterHandle\n                              }), \"{}\", (function (a) {\n                              return a;\n                            }))), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined)(undefined)).then((function (prim) {\n              return prim.text();\n            })).then((function (text) {\n            var optTwitterProof = getResult(text);\n            if (optTwitterProof !== undefined) {\n              var exit = 0;\n              if (typeof threeBoxState !== \"number\") {\n                switch (threeBoxState.tag | 0) {\n                  case /* SyncedBox */2 :\n                  case /* SyncedBoxWithSpace */3 :\n                  case /* SyncedSpace */4 :\n                      exit = 1;\n                      break;\n                  default:\n                    \n                }\n              }\n              if (exit === 1) {\n                $$Promise.getOk($$Promise.Js.toResult(threeBoxState[0].verified.addTwitter(optTwitterProof)), (function (_result) {\n                        Curry._1(reloadUser, true);\n                        return Curry._1(setTwitterVerificationStep, (function (param) {\n                                      return /* Uninitialized */0;\n                                    }));\n                      }));\n              }\n              \n            }\n            return Promise.resolve(undefined);\n          }));\n    \n  };\n  var match$1 = React.useState((function () {\n          return \"\";\n        }));\n  var setTwitterHandle = match$1[1];\n  var twitterHandle = match$1[0];\n  if (twitterVerification !== undefined) {\n    return React.createElement(React.Fragment, {\n                children: null\n              }, React.createElement(\"p\", undefined, \"Your twitter is verified\"), React.createElement(RimbleUi.Button, {\n                    children: \"Remove Verification\",\n                    onClick: (function (e) {\n                        e.preventDefault();\n                        removeTwitter(undefined);\n                        \n                      })\n                  }));\n  }\n  if (typeof twitterVerificationStep === \"number\") {\n    if (twitterVerificationStep === /* Uninitialized */0) {\n      return React.createElement(React.Fragment, {\n                  children: null\n                }, React.createElement(RimbleUi.Heading, {\n                      children: \"verify your twitter\"\n                    }), React.createElement(RimbleUi.Input, {\n                      type: \"string\",\n                      placeholder: \"twitter_handle\",\n                      onChange: (function ($$event) {\n                          var value = Belt_Option.getWithDefault($$event.target.value, \"\");\n                          return Curry._1(setTwitterHandle, (function (param) {\n                                        return value;\n                                      }));\n                        }),\n                      value: twitterHandle\n                    }), React.createElement(RimbleUi.Button, {\n                      children: \"Verify\",\n                      onClick: (function (e) {\n                          e.preventDefault();\n                          verifyTwitter(undefined);\n                          \n                        })\n                    }));\n    } else {\n      return React.createElement(\"p\", undefined, \"Please login to 3box!\");\n    }\n  }\n  if (twitterVerificationStep.tag) {\n    return React.createElement(\"p\", undefined, \"Verifying with server!\");\n  }\n  var did = twitterVerificationStep[0];\n  var link = \"https://twitter.com/intent/tweet?text=This Tweet links my Twitter account to my 3Box profile!\\n%0D%0A%0D%0Ahttps://wildcards.world/%23user/\" + (String(currentUser) + (\"\\n%0D%0A%0D%0ASupport Animal conservation @wildcards_world\\n%0D%0A✅\\n%0D%0A\" + (String(did) + \"\\n%0D%0A✅\")));\n  var tmp;\n  tmp = typeof threeBoxState === \"number\" || threeBoxState.tag !== /* SyncedBox */2 ? React.createElement(\"p\", undefined, \"waiting to sync 3box before continuing\") : React.createElement(RimbleUi.Button, {\n          children: \"NEXT\",\n          onClick: (function (e) {\n              e.preventDefault();\n              submitTwitterVerification(did, twitterHandle);\n              \n            })\n        });\n  return React.createElement(React.Fragment, {\n              children: null\n            }, React.createElement(\"p\", undefined, \"Post the following proof to twitter\"), React.createElement(\"p\", undefined, did), React.createElement(\"button\", undefined, React.createElement(\"a\", {\n                      className: \"modal__github__description__copy__tweet\",\n                      href: link,\n                      rel: \"noopener noreferrer\",\n                      target: \"_blank\"\n                    }, \"Tweet this\")), tmp);\n}\n\nvar TwitterVerification = {\n  make: ThreeBoxUpdate$TwitterVerification\n};\n\nfunction ThreeBoxUpdate$ThreeBoxUpdate(Props) {\n  var currentUser = Belt_Option.mapWithDefault(RootProvider$WildCards.useCurrentUser(undefined), \"\", (function (a) {\n          return a;\n        }));\n  var userInfoContext = UserProvider$WildCards.useUserInfoContext(undefined);\n  var reloadUser = function (forceReload) {\n    return Curry._2(userInfoContext.update, currentUser, forceReload);\n  };\n  Curry._2(userInfoContext.update, currentUser, false);\n  var optThreeBoxData = UserProvider$WildCards.use3BoxUserData(currentUser);\n  var match = React.useState((function () {\n          return /* DefaultView */Block.__(0, [/* NoState */0]);\n        }));\n  if (optThreeBoxData === undefined) {\n    return React.createElement(RimbleUi.Loader, { });\n  }\n  var setThreeBoxState = match[1];\n  var threeBoxState = match[0];\n  var profile = optThreeBoxData.profile;\n  var verification = optThreeBoxData.verifications;\n  return React.createElement(React.Fragment, {\n              children: null\n            }, profile !== undefined ? React.createElement(\"div\", undefined, React.createElement(ThreeBoxUpdate$ProfileDetails, {\n                        profileName: Belt_Option.mapWithDefault(profile.name, \"\", (function (a) {\n                                return a;\n                              })),\n                        profileDescription: Belt_Option.mapWithDefault(profile.description, \"\", (function (a) {\n                                return a;\n                              })),\n                        reloadUser: reloadUser,\n                        setThreeBoxState: setThreeBoxState,\n                        threeBoxState: threeBoxState\n                      })) : React.createElement(RimbleUi.Loader, { }), verification !== undefined ? React.createElement(ThreeBoxUpdate$TwitterVerification, {\n                    twitterVerification: verification.twitter,\n                    threeBoxState: threeBoxState,\n                    setThreeBoxState: setThreeBoxState,\n                    reloadUser: reloadUser\n                  }) : React.createElement(ThreeBoxUpdate$TwitterVerification, {\n                    twitterVerification: undefined,\n                    threeBoxState: threeBoxState,\n                    setThreeBoxState: setThreeBoxState,\n                    reloadUser: reloadUser\n                  }));\n}\n\nvar ThreeBoxUpdate = {\n  make: ThreeBoxUpdate$ThreeBoxUpdate\n};\n\nfunction ThreeBoxUpdate$Main(Props) {\n  var currentUser = Belt_Option.mapWithDefault(RootProvider$WildCards.useCurrentUser(undefined), \"\", (function (a) {\n          return a;\n        }));\n  var match = React.useState((function () {\n          return false;\n        }));\n  var setIsIntegarted3Box = match[1];\n  return React.createElement(\"div\", undefined, React.createElement(RimbleUi.Heading, {\n                  children: \"Verify your identity\"\n                }), React.createElement(\"br\", undefined), match[0] ? React.createElement(ThreeBoxUpdate$ThreeBoxUpdate, { }) : React.createElement(React.Fragment, {\n                    children: null\n                  }, React.createElement(RimbleUi.Text, {\n                        children: null\n                      }, \"Please use\", React.createElement(\"strong\", undefined, React.createElement(\"a\", {\n                                href: \"https://3box.io/\" + currentUser,\n                                target: \"_blank\"\n                              }, \" 3Box.io \")), \"to validate your identity on twitter.\"), React.createElement(\"br\", undefined), React.createElement(RimbleUi.Button, {\n                        children: \"Try Experimental 3box integration\",\n                        onClick: (function (_e) {\n                            return Curry._1(setIsIntegarted3Box, (function (param) {\n                                          return true;\n                                        }));\n                          })\n                      })));\n}\n\nvar Main = {\n  make: ThreeBoxUpdate$Main\n};\n\nvar $$default = ThreeBoxUpdate$Main;\n\nexport {\n  ProfileItem ,\n  ProfileDetails ,\n  getResult ,\n  TwitterVerification ,\n  ThreeBoxUpdate ,\n  Main ,\n  $$default ,\n  $$default as default,\n  \n}\n/* 3box Not a pure module */\n"],"sourceRoot":""}